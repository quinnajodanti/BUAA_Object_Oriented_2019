# 简单多项式求导 - Simple Poly Derivation

## 概览

1. 文件定义了两个Java功能类：Poly, PolyUnit，分别用于构造整个表达式、单个表达式项的对象。
2. 文件功能：以单行的形式读取表达式，检查表达式规范，并输出一阶导的合法表达式结果。



## Poly类

### 构造方法

#### Poly(String str)

构造方法以检查表达式正确性、形式化简、拆分表达式和统计四步，具体情况如下。

**检查表达式正确性**：

​	表达式正确性检查在Poly类中提供了两种方法**formatCheck（）**和**formatCheckSequence（）**，前者使用超长正则表达式进行完整检查表达式，后者则逐个检查表达式是否由紧密相接的单元项相接而成，为防止爆栈，采用顺序逐个检查的方法。（单元项向以正则表达式写成，共有三种情况：常数项、无系数项、完整项。）

**形式化简**：

​	清除占位符，运算符化简（连续两个的运算符被替换为单个运算符）。

**拆分表达式：**

​	若表达式形式正确，则使用单元项的正则表达式对表达式进行拆分，并建立PolyUnit对象。	

**统计**：

​	调用PolyUnit中对象的方法，得到单元项的系数（coefficient）和指数（index）信息，并以指数为标准，合并相同指数的PolyUnit对象，归入HashMap中。

### Set型方法

无

### Get型方法

1. #### formatCheck()

   返回Poly对象中Valid值，表明表达式是否合法。

2. #### getOriginalPoly()

   返回Poly对象求导0次后的字符串型表达式。

3. #### getDerivationPoly()

   返回Poly对象求导1次后的字符串型表达式。



## PolyUnit类

### 构造方法

#### PolyUnit(String str)

以字符进行构造的方法接受的表达式单元项格式有以下要求：

1、合法形式。

2、单位项不存在空格、tab等占位符。

3、单位项系数最多包含一个运算符。

在满足要求后，程序将以单元项的五类细分情况进行解析，具体分类情况及其对应的正则变量名如下：

1 常数项（无x）---> constant

2 非常数项（有x）

​	2.1 省略系数（x在首位）

​			2.1.1 省略指数  ---> xNoCoeNoIndex

​			2.1.2 不省略指数 ---> xNoCoe

​	2.2 不省略系数（x不在首位）

​			2.2.1 省略指数（找不到^）---> xNoIndex

​			2.2.2 不省略指数（找到了^) ---> xStandard（省略）

#### PolyUnit(BigInteger coe, BigInteger index)

系数和指数即可唯一地确定一个单元项，因此PolyUnit对象也可以用此方法构造，暂未使用。

### Set型方法

#### updateCoe(newCoe)

由于在表达式拆分处理中设计到同指数项的合并，因此创建方法用于更新PolyUnit对象中系数Coe的值，使用该方法是**原系数加上新系数，不是替换**。

### Get型方法

#### getCoe()

返回PolyUnit对象的系数。

#### getIndex()

返回PolyUnit对象的指数。

#### getUnit()

返回PolyUnit原单元项（0次求导）的字符串形式。

字符串生成有**polyUnitGenerate**方法提供，生成策略如下：

单元项化简策略如下：

1 系数（常数）为0 ---> null

2 系数（常数）不为0

​	2.1 指数为0（即常数） --->  C

​	2.2 指数非0

​		2.2.1.1 系数为1 ---> +x...

​		2.2.1.2 系数为-1 ---> -x...

​		2.2.1.3 其他 ---> c*x...

​		2.2.2.1 指数为1 ---> 省略 "^ index"

​		2.2.2.2 指数非1 ---> 追加 "^ index"

#### getDerivation(int derivationNum)

返回PolyUnit单元项求导derivationNum次后的字符串形式。